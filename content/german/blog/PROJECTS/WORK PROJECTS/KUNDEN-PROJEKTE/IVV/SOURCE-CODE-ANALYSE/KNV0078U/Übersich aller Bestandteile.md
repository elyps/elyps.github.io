
---

| Typ                       | Name                                            | Beschreibung                                                                                                                                                                                                                    | Position im Code                                                      |
| ------------------------- | ----------------------------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | --------------------------------------------------------------------- |
| **SECTION**               | IDENTIFICATION DIVISION                         | Enthält grundlegende Programminformationen wie Program‑ID, Autor, Erstellungsdatum, Kurzbeschreibung und Änderungsverlauf.                                                                                                      | Beginn des Programms                                                  |
| **SECTION**               | ENVIRONMENT DIVISION                            | Definiert die Ausführungsumgebung und Systemparameter (z. B. SPECIAL‑NAMES wie „DECIMAL‑POINT IS COMMA“).                                                                                                                       | Nach der IDENTIFICATION DIVISION                                      |
| **SECTION**               | DATA DIVISION                                   | Gliedert alle Datendefinitionen des Programms; hier werden sämtliche Datenbereiche (z. B. WORKING‑STORAGE, LINKAGE) definiert.                                                                                                  | Nach der ENVIRONMENT DIVISION                                         |
| **DATENBEREICH**          | WORKING‑STORAGE SECTION                         | Beinhaltet alle im Programm verwendeten Variablen, Konstanten, Indizes, Flags, Schalter, Zwischenfelder und COPY‑Book‑Einbindungen – Daten, die während der gesamten Programmausführung bestehen bleiben.                       | Innerhalb der DATA DIVISION                                           |
| **DATENBEREICH**          | LINKAGE SECTION                                 | Definiert Schnittstellenfelder für den Datenaustausch zwischen diesem Programm und aufrufenden/externen Programmen.                                                                                                             | Innerhalb der DATA DIVISION                                           |
| **SECTION**               | PROCEDURE DIVISION                              | Enthält den ausführbaren Programmcode, der in mehrere logische Abschnitte (Sections und Paragraphs) unterteilt ist, um den Programmfluss zu steuern.                                                                            | Nach der DATA DIVISION                                                |
| **PARAGRAPH**             | F000-PROGRAMM‑STEUERUNG                         | Zentraler Steuerblock, der Initialisierungen durchführt, Systemmeldungen interpretiert und anhand von Funktions‑ und Button‑Codes den weiteren Ablauf (z. B. Aufruf von INIT‑Routine) steuert.                                  | Beginn der PROCEDURE DIVISION                                         |
| **PARAGRAPH**             | F010‑VORLAUF                                    | Führt die Initialisierung der Variablen, das Laden von Kompilierungsinformationen und grundlegenden Steuerfeldern durch; ruft über CALL‑Anweisungen z. B. die ID‑Ermittlungsroutine (KNV0066U) auf.                             | Direkt nach F000‑PROGRAMM‑STEUERUNG                                   |
| **PARAGRAPH**             | F200‑NEUANTRAG                                  | Bearbeitet die Vorbelegung im Rahmen eines Neuantrags (Neuversicherung): Ermittelt über U100 die Spartenzugehörigkeit, liest Bewegungsdaten (über U200 und U203) und überträgt Bausteine und Leistungsvarianten in den Antrag.  | Innerhalb der PROCEDURE DIVISION                                      |
| **PARAGRAPH**             | F201‑NEUANTRAG                                  | Spezifische Verarbeitung bei Fahrzeugwechselvorgängen – ähnlich zu F200, jedoch mit Anpassungen für die besonderen Anforderungen des Fahrzeugwechsels.                                                                          | Direkt nach F200‑NEUANTRAG                                            |
| **PARAGRAPH**             | F230‑FAHRZEUGWECHSEL‑KH                         | Verantwortlich für die Vorbelegung der Sparte KH (Haftpflicht) bei Fahrzeugwechsel: Sucht und vergleicht die SAK (Sparten‑zuordnung) und deren zugehörige Deckung; ruft bei Bedarf F230 bzw. F235 zur Weiterverarbeitung auf.   | Nach F201‑NEUANTRAG                                                   |
| **PARAGRAPH**             | F240‑KURZFRIST                                  | Bearbeitet kurzfristige Kasko‑Fälle: Liest über U217 spezifische SF‑Daten ein, überträgt Bausteine (U410) und schreibt diese (U430); zusätzlich erfolgt das Einlesen und Aktualisieren von Leistungsvarianten.                  | Nach F230‑FAHRZEUGWECHSEL‑KH                                          |
| **PARAGRAPH**             | F250‑AENDERUNG‑VG                               | Zuständig für Vorbelegungen bei Änderungs‑vorgängen (z. B. Vertragsänderungen mit Wagniswechsel): Ermittelt die SAK, prüft, ob die alte Deckung vorhanden ist, und leitet ggf. einen Wechsel zu alternativen Vorbelegungen ein. | Nach F240‑KURZFRIST                                                   |
| **PARAGRAPH**             | F805‑BEARB‑IDENT‑SAK‑DECK                       | Verarbeitet Fälle, in denen eine identische SAK mit derselben Deckung (bzw. Vorbelegung) gefunden wurde: Überträgt in einer Schleife Bausteine (U420) und liest Leistungsvarianten (U440) ein.                                  | Nach F250‑AENDERUNG‑VG                                                |
| **PARAGRAPH**             | F210‑TARIF‑WECHSELN                             | Führt Tarifwechsel durch: Überträgt relevante Daten in definierte Datenbereiche und ruft über CALL das Fachmodul KNV0064U zur Aktualisierung des Tarifs auf.                                                                    | Nach F805‑BEARB‑IDENT‑SAK‑DECK                                        |
| **PARAGRAPH**             | F215‑KORREKTUR‑KNT020A                          | Prüft die Konsistenz des Versicherungsbeginns in Verbindung mit der Tarifgeneration der SAKs und löst bei Abweichungen einen Tarifwechsel aus.                                                                                  | Nach F210‑TARIF‑WECHSELN                                              |
| **PARAGRAPH**             | F099‑PROGRAMM‑BEENDEN                           | Sorgt für einen ordnungsgemäßen Programmabschluss: Finalisiert Updates (Commit), übergibt ggf. letzte Werte und beendet das Programm (GOBACK).                                                                                  | Am Ende der PROCEDURE DIVISION                                        |
| **DATENBEREICH**          | Arbeitsfelder (z. B. Indizes, Flags, ZW‑Felder) | Enthält alle wichtigen Variablen und Zwischenfelder, die zur Steuerung des Programmablaufs, zur Iteration in Schleifen und zur Zwischenspeicherung von Werten (z. B. ZW‑ANZ‑PB03, I‑BST3, S‑SPEICHER‑DECKUNG) verwendet werden. | In WORKING‑STORAGE SECTION                                            |
| **DATENBEREICH**          | COPYBOOK‑Einbindungen                           | Standardisierte Kopiervorlagen (z. B. KNMV013C, DMDHCTR1, DMMSYF04, DMMSYF01) zur Definition gemeinsamer Datenstrukturen, Konstanten und zur Wiederverwendung in mehreren Programmen.                                           | Über WORKING‑STORAGE und LINKAGE SECTION                              |
| **DATENBANKEN / DATEIEN** | Datenhandler (DMDHCTR1)                         | Externes Modul zur Steuerung des Datenaustauschs (READ, OPEN, FETCH, CLOSE) für verschiedene Datenbereiche (Beitragstabellen, Angebotsdaten etc.).                                                                              | Verwendet in EA‑CONTROL und CALL-Aufrufen                             |
| **DATENBANKEN / DATEIEN** | Systemfehlerprotokollierung                     | Externe Copybooks (DMMSYF04, DMMSYF01) zur Erfassung und Protokollierung von Systemfehlern; Fehlercodes werden in den Feldern K‑SYSTEMFEHLER und SYF‑BEREICH gespeichert und verarbeitet.                                       | In WORKING‑STORAGE und während Fehlerbehandlung in PROCEDURE DIVISION |
| **DATENBANKEN / DATEIEN** | Externe Aufrufprogramme                         | Programme wie KNV0066U, KNF9000Z, KNF9031Z, KNF9044Z, KNF9041Z, KNF9043Z, KNPAKGRZ, KNF8015P, KNI0067U etc. werden per CALL aufgerufen, um externe Daten (z. B. IDs, Angebote, Deckungen) zu laden bzw. zu aktualisieren.       | In AUFGERUFENE‑UPRO und CALL-Anweisungen                              |
| **DATENBANKEN / DATEIEN** | Persistente Dateien/Tabellen                    | Der Zugriff auf persistente Daten (z. B. in VSAM‑Dateien oder DB2‑Tabellen) erfolgt indirekt über die Datenhandler und COPYBOOK‑Strukturen – direkte SQL‑Befehle sind im Modul nicht zu sehen.                                  | Über COPYBOOK‑Einbindungen und Datenhandler                           |

---

Diese Tabelle fasst alle relevanten Bestandteile des COBOL‑Programms **KNV0078U** zusammen und bietet so ein umfassendes technisches Verständnis der Struktur und des Programmflusses.
